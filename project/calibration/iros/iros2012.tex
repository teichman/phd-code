

%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8

\documentclass[letterpaper, 10 pt, conference]{ieeeconf}  % Comment this line out
                                                          % if you need a4paper
%\documentclass[a4paper, 10pt, conference]{ieeeconf}      % Use this line for a4
                                                          % paper
\usepackage[pdftex]{graphicx}

\IEEEoverridecommandlockouts                              % This command is only
                                                          % needed if you want to
                                                          % use the \thanks command
\overrideIEEEmargins
% See the \addtolength command later in the file to balance the column lengths
% on the last page of the document


\usepackage{hyperref}
% The following packages can be found on http:\\www.ctan.org
\usepackage{mathptmx} % assumes new font selection scheme installed
\usepackage{times} % assumes new font selection scheme installed
\usepackage{amsmath} % assumes amsmath package installed
\usepackage{amssymb}  % assumes amsmath package installed
\usepackage{multirow}
\usepackage[ruled,vlined]{algorithm2e}
\usepackage{algorithmic}

\title{\LARGE \bf
Unsupervised Calibration of Multiple Depth Sensors (TODO come up with real title)}
%TODO@SDM rename

\author{Alex Teichman, Stephen Miller, and Sebastian Thrun
\thanks{Alex Teichman, Stephen Miller, and Sebastian Thrun are with the Department of Computer Science at Stanford University. \newline E-mail: \{teichman, stephen, thrun\}@cs.stanford.edu } }

\include{latex_macros}
\begin{document}

\maketitle
\thispagestyle{empty}
\pagestyle{empty}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{abstract}
aoeu
TODO
%TODO@SDM Write
\end{abstract}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{INTRODUCTION}

TODO
%TODO@SDM Write

\section{RELATED WORK}
%TODO \cite{rubleeorb}
%TODO@SDM Write


\section{OUR APPROACH}
TODO
%TODO@SDM Write




 we first assume that NTP or similar methods can provide synchronization to within about 100ms.  The core idea of the approach is to use the rough locations of moving objects to provide a reasonable starting point for ICP over transforms and grid search over synchronization offsets.

However, naively running ICP on entire frames can result in very poor alignments, an example of which can be seen in Figure \todo{x}.  This is because ICP rewards transforms in which many points are nearby, and floors often have more observed points on them than the people or robots walking on them.  Running ICP on just the foreground objects in each frame produces much better results.


\begin{algorithm}
  \caption{Algorithm sketch}
  \label{alg:sketch}
  \SetLine
  \KwData{Two roughly synchronized RGBD videos}
  \KwResult{Transform and synchronization offset}
  \phantom{\;}
  Background subtraction to find foreground points\;
  Connected components to find large objects\;
  $T$ = centroidRANSAC()\;
  Apply $T$ to floating scenes\;
  \While{$||T||_F > 0.001$}{
    $T$ = updateTransformICP()\;
    Apply $T$ to floating scenes\;
    $s$ = updateSync()\;
    Apply $s$ to floating scenes\;
  }
\end{algorithm}

background subtraction is a histogram of depth values for each pixel.  If at least some percent of the values in the histogram have ended up in that bin, then it's a background point.

connected components is the usual thing, with erode and dilate to get rid of small points.  objects were required to be at least 0.5m in one direction and 1000 points.

updateSync was done by grid search over
\newcommand{\dmax}{d_{\mbox{\tiny{max}}}}
\begin{align*}
  \frac{1}{M} \sum_{i=1}^M \frac{1}{N_i} \sum_{j=1}^{N_i}    (\dmax, ||p_j - p'||_2)
\end{align*}
where $i$ ranges over matched foreground scenes and $j$ over points in the floating sensor.  $p'$ is the nearest neighbor.


referred to as \texttt{centroidRANSAC()} in Algorithm~\ref{alg:sketch}, provides a rough estimate of the transform which serves as a reasonable starting point for ICP.


\begin{algorithm}
  \caption{Centroid RANSAC}
  \label{alg:cal}
  \SetLine
  \KwData{Two roughly synchronized sets of foreground objects from RGBD videos}
  \KwResult{Rough guess of transform}
  \phantom{\;}
  inlier threshold 0.5m.  RANSAC, 1000 samples of correspondences.
\end{algorithm}



\section{EXPERIMENTS}
TODO
%TODO@SDM Write

To keep the amount of data manageable but still produce a good result, we used between about thirty and ten percent of the total frames in each sequence, sampling chunks of consecutive frames to allow synchronization search to work.

Because of the availability of NTP, approximate synchronization of the sensors is possible across multiple machines.  However, NTP alone does not provide sufficient precision for aligning 30fps RBGD data, where offsets tens of milliseconds are significant.


sensors do not trigger at the same time, leading to unavoidable synchronization slop that we do not address.



\begin{figure}
  \centering
  \includegraphics[width=\linewidth]{img/bargraph.pdf}
  \caption{}
  \label{fig:}
\end{figure}


\section{CONCLUSIONS}
TODO
%TODO@SDM Write

%\bibliographystyle{IEEEtran}
%\bibliography{iros2012}

\end{document}

